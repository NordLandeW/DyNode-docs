import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{e as l,f as s,g as i,h as e,i as d,j as h,r as o,o as r}from"./app-BNzxpuv9.js";const c={},p={class:"hint-container info"};function k(g,t){const a=o("RouteLink");return r(),l("div",null,[t[5]||(t[5]=s('<h1 id="文件格式" tabindex="-1"><a class="header-anchor" href="#文件格式"><span>文件格式</span></a></h1><p>本页面旨在规定 DyNode 使用的项目文件的格式，文件后缀为 <code>.dyn</code>。</p><p>格式版本描述为 <code>dyn file format v1</code> 。<code>formatVersion</code> 版本号为 <code>1</code>。</p>',3)),i("div",p,[t[3]||(t[3]=i("p",{class:"hint-container-title"},"关于项目降级",-1)),t[4]||(t[4]=i("p",null,[e("在 v0.2.0 之前的 DyNode 使用的格式版本描述为 "),i("code",null,"dyn file format v0"),e("。"),i("code",null,"v1"),e(" 相对于 "),i("code",null,"v0"),e(" 版本的项目格式产生了重大变动，因此无法使用 v0.1 版本载入 "),i("code",null,"dyn file format v1"),e(" 格式的项目文件。")],-1)),i("p",null,[t[1]||(t[1]=e("DyNode 目前并未支持任何情况下的项目降级功能。如果你需要将项目降级并导入较早的版本使用，可以将项目 ")),d(a,{to:"/guide/export.html"},{default:h(()=>t[0]||(t[0]=[e("导出")])),_:1}),t[2]||(t[2]=e(" 到 Dynamaker-modified 格式后再在较早的版本新建项目导入。"))])]),t[6]||(t[6]=s(`<h2 id="约定" tabindex="-1"><a class="header-anchor" href="#约定"><span>约定</span></a></h2><p><code>dyn file format v1</code> 是一个基于 JSON 的文件格式，见 <a href="https://www.json.org/json-en.html" target="_blank" rel="noopener noreferrer">JSON 标准</a>。</p><p>使用该格式的所有文件应当使用 UTF-8 编码。</p><p>文件可以以纯文本方式或经 ZSTD 算法压缩后存储。经过压缩后的文件符合 ZSTD 规定的标准 <code>Zstandard Compression Format</code> 。可以通过检查文件头的魔法数（小端序） <code>0xFD2FB528</code> 来判断文件是否经过了 ZSTD 压缩，并通过 ZSTD 提供的 <a href="https://github.com/facebook/zstd/blob/dev/lib/decompress/zstd_decompress.c" target="_blank" rel="noopener noreferrer">标准库</a> 函数 <code>ZSTD_decompress()</code> 对文件进行解压。</p><p>本文档所描述的所有项在未经特别说明的情况下，都是<strong>必需</strong>且不具备<strong>默认值</strong>的。</p><h2 id="projectobject" tabindex="-1"><a class="header-anchor" href="#projectobject"><span>projectObject</span></a></h2><table><thead><tr><th style="text-align:center;">键值</th><th style="text-align:center;">值类型</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:center;"><code>version</code></td><td style="text-align:center;">String</td><td style="text-align:left;">表示导出该项目的 DyNode 应用程序版本。</td></tr><tr><td style="text-align:center;"><code>formatVersion</code></td><td style="text-align:center;">Integer</td><td style="text-align:left;">表示该文件对应的 <code>dyn file format</code> 版本。</td></tr><tr><td style="text-align:center;"><code>metadata</code></td><td style="text-align:center;">projectMetadataObject</td><td style="text-align:left;">项目的元信息。</td></tr><tr><td style="text-align:center;"><code>charts</code></td><td style="text-align:center;">Array of <code>chartObject</code></td><td style="text-align:left;">包含一个或多个谱面对象的列表。</td></tr></tbody></table><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;version&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;v0.1.19&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,       </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// DyNode 版本</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;formatVersion&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,         </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 文件格式版本</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;metadata&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        &quot;stats&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        },                      </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 项目统计信息</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        &quot;settings&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }                       </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 项目设置</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    },                          </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// projectMetadataObject</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;charts&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        },                      </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// chartObject</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    ]   </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Array of chartObjects</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="projectmetadataobject" tabindex="-1"><a class="header-anchor" href="#projectmetadataobject"><span>projectMetadataObject</span></a></h2><p>用于存储项目的元信息，例如编辑器特定的设置、窗口布局、或临时的统计数据。</p><ul><li>此对象的结构和内容作为应用程序的自定义数据区，其格式可能会随 DyNode 版本的更新而频繁变更，其不受本文档的其它全局规则约束。</li><li>本文档不规定 <code>projectMetadataObject</code> 内部必须包含哪些键或值。其内容完全由当前的 DyNode 版本进行定义。</li><li>作为此规范的参考实现，DyNode 在解析此对象时，如果找不到预期的设置项，会使用其内部的默认值。因此，此对象内部的字段不是必需的。</li><li><code>projectObject.metadata</code> 这个键值对仍然是必需的。其值可以是一个空对象 <code>{}</code>。</li></ul><div class="hint-container tip"><p class="hint-container-title">处理 projectMetadataObject 时的建议</p><p>在读取文件时，可以安全地忽略此对象内的所有内容。</p><p>在写入文件时，建议完整地保留此对象内在读入时的所有内容。除非非常清楚修改其内部数据的对应效果，否则不应更改它。</p></div><h2 id="chartobject" tabindex="-1"><a class="header-anchor" href="#chartobject"><span>chartObject</span></a></h2><p>用于存储谱面信息。</p><table><thead><tr><th style="text-align:center;">键值</th><th style="text-align:center;">值类型</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:center;"><code>metadata</code></td><td style="text-align:center;"><code>chartMetadataObject</code></td><td style="text-align:left;">谱面的元信息。</td></tr><tr><td style="text-align:center;"><code>path</code></td><td style="text-align:center;"><code>chartPathObject</code></td><td style="text-align:left;">谱面所需的文件路径。</td></tr><tr><td style="text-align:center;"><code>timingPoints</code></td><td style="text-align:center;">Array of <code>timingPointObject</code></td><td style="text-align:left;">Timing Point 列表，<strong>不保证有序</strong>。</td></tr><tr><td style="text-align:center;"><code>notes</code></td><td style="text-align:center;">Array of <code>noteObject</code></td><td style="text-align:left;">音符列表，<strong>不保证有序</strong>。</td></tr></tbody></table><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;metadata&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        &quot;title&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Bitcrusher&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        &quot;difficulty&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,                </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Integer</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        &quot;sideType&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            &quot;PAD&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            &quot;PAD&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        ],  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Array of string</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        &quot;artist&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;namitape&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        &quot;charter&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;somebody&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    },   </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// chartMetadataObject</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;path&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        &quot;music&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;audio.mp3&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,         </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Relative path</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        &quot;image&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;bg.png&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        &quot;video&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;bg.mp4&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    },  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// chartPathObject</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;timingPoints&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : [</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            &quot;offset&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            &quot;bpm&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">120</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            &quot;meter&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        },  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// timingPointObject</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    ],   </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Array of timingPointObjects</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;notes&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : [</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            &quot;time&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,              </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Note 时间，ms</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            &quot;position&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2.5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,        </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Note 位置</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            &quot;width&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1.0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,           </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Note 宽度</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            &quot;side&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,              </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Note 下落侧</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            &quot;type&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,              </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Note 类型</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            &quot;length&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">             // Hold 长度, ms</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }, </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// noteObject</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    ]   </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Array of noteObjects</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="chartpathobject" tabindex="-1"><a class="header-anchor" href="#chartpathobject"><span>chartPathObject</span></a></h3><p>定义谱面所需的外部文件相对路径。路径值可留空字符串 <code>&quot;&quot;</code>，表示不加载该文件。</p><table><thead><tr><th style="text-align:center;">键值</th><th style="text-align:center;">值类型</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:center;"><code>music</code></td><td style="text-align:center;">String</td><td style="text-align:left;">音乐文件的相对路径。</td></tr><tr><td style="text-align:center;"><code>image</code></td><td style="text-align:center;">String</td><td style="text-align:left;">背景图片文件的相对路径。</td></tr><tr><td style="text-align:center;"><code>video</code></td><td style="text-align:center;">String</td><td style="text-align:left;">背景视频文件的相对路径。</td></tr></tbody></table><h3 id="chartmetadataobject" tabindex="-1"><a class="header-anchor" href="#chartmetadataobject"><span>chartMetadataObject</span></a></h3><p>用于存储与谱面本身有关的元信息。</p><table><thead><tr><th style="text-align:center;">键值</th><th style="text-align:center;">值类型</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:center;"><code>title</code></td><td style="text-align:center;">String</td><td style="text-align:left;">谱面显示的标题。</td></tr><tr><td style="text-align:center;"><code>difficulty</code></td><td style="text-align:center;">Integer</td><td style="text-align:left;">谱面难度。<code>0</code>:Casual, <code>1</code>:Normal, <code>2</code>:Hard, <code>3</code>:Mega, <code>4</code>:Giga, <code>5</code>:Tera。</td></tr><tr><td style="text-align:center;"><code>sideType</code></td><td style="text-align:center;">Array of String</td><td style="text-align:left;"><code>[左侧, 右侧]</code> 的下落类型。有效值为 <code>&quot;PAD&quot;</code>, <code>&quot;MIXER&quot;</code>, <code>&quot;MULTI&quot;</code>。</td></tr><tr><td style="text-align:center;"><code>artist</code></td><td style="text-align:center;">String</td><td style="text-align:left;">音乐的艺术家。</td></tr><tr><td style="text-align:center;"><code>charter</code></td><td style="text-align:center;">String</td><td style="text-align:left;">谱面的制作者。</td></tr></tbody></table><h3 id="timingpointobject" tabindex="-1"><a class="header-anchor" href="#timingpointobject"><span>timingPointObject</span></a></h3><p>包含单个 Timing Point 的数据。</p><table><thead><tr><th style="text-align:center;">键值</th><th style="text-align:center;">值类型</th><th style="text-align:left;">描述</th><th style="text-align:center;">单位</th></tr></thead><tbody><tr><td style="text-align:center;">offset</td><td style="text-align:center;">Double</td><td style="text-align:left;">Timing Point 开始时间，以音乐起点为 <code>0</code>。</td><td style="text-align:center;">毫秒</td></tr><tr><td style="text-align:center;">bpm</td><td style="text-align:center;">Double</td><td style="text-align:left;">每分钟节拍数 (Beats Per Minute)。</td><td style="text-align:center;">BPM</td></tr><tr><td style="text-align:center;">meter</td><td style="text-align:center;">Integer</td><td style="text-align:left;">节拍记号 (<code>meter</code>/4)。当值为 <code>4</code> 时，代表该 Timing Point 为 <code>4/4</code> 拍。</td><td style="text-align:center;">-</td></tr></tbody></table><h3 id="noteobject" tabindex="-1"><a class="header-anchor" href="#noteobject"><span>noteObject</span></a></h3><p>包含单个音符的数据。</p><table><thead><tr><th style="text-align:center;">键值</th><th style="text-align:center;">值类型</th><th style="text-align:left;">描述</th><th style="text-align:left;">单位/有效值</th></tr></thead><tbody><tr><td style="text-align:center;"><code>time</code></td><td style="text-align:center;">Double</td><td style="text-align:left;">Note 所在的时间。以音乐起点为 <code>0</code>。</td><td style="text-align:left;">毫秒</td></tr><tr><td style="text-align:center;"><code>position</code></td><td style="text-align:center;">Double</td><td style="text-align:left;">Note 中心的位置。<code>2.5</code> 为中心。</td><td style="text-align:left;">Unit</td></tr><tr><td style="text-align:center;"><code>width</code></td><td style="text-align:center;">Double</td><td style="text-align:left;">Note 的宽度。</td><td style="text-align:left;">Unit</td></tr><tr><td style="text-align:center;"><code>side</code></td><td style="text-align:center;">Integer</td><td style="text-align:left;">Note 所在的侧面。</td><td style="text-align:left;"><code>0</code> (FRONT), <code>1</code> (LEFT), <code>2</code> (RIGHT)</td></tr><tr><td style="text-align:center;"><code>type</code></td><td style="text-align:center;">Integer</td><td style="text-align:left;">Note 的类型。</td><td style="text-align:left;"><code>0</code> (NORMAL), <code>1</code> (CHAIN), <code>2</code> (HOLD)</td></tr><tr><td style="text-align:center;"><code>length</code></td><td style="text-align:center;">Double</td><td style="text-align:left;"><code>type</code> 为 <code>HOLD</code> 时，代表长按的持续时间。对于其他 <code>type</code>，此值必须为 <code>0</code>。</td><td style="text-align:left;">毫秒</td></tr></tbody></table><div class="hint-container note"><p class="hint-container-title">基于 DyNode 的布局实现</p><p>将 <code>time</code> / <code>position</code> / <code>width</code> 转换到具体布局的实现方式不为本文档所强制规定。作为补充，下方描述 <code>position</code> 与 <code>width</code> 转换到屏幕布局的基于 DyNode 的实现。</p><p>下方所有有关布局的描述基于 <code>1920 px * 1080 px</code> 分辨率。布局基于平面直角坐标系。坐标以左上角为 <code>(0,0)</code>，以右下角为 <code>(1920,1080)</code>。</p><p>其中，<code>width</code> 到判定宽度（以像素为单位）的换算方式是：</p><ul><li>当 <code>side</code> 为 <code>FRONT</code> 时，<code>= width * 300 - 30</code>。</li><li>当 <code>side</code> 为 <code>LEFT</code> 或 <code>RIGHT</code> 时，<code>= width * 150 - 30</code>。</li></ul><p><code>position</code> 以布局中央为中心，到具体屏幕位置（以像素为单位）的换算方式是：</p><ul><li>当 <code>side</code> 为 <code>FRONT</code> 时，横坐标基于布局横向中央 (860px) <code>= 860 + (position - 2.5) * 300</code>。</li><li>当 <code>side</code> 为 <code>LEFT</code> 或 <code>RIGHT</code> 时，纵坐标基于布局纵向中央 (540px) <code>= 540 - (position - 2.5) * 150</code>。</li></ul></div>`,29))])}const u=n(c,[["render",k],["__file","file-formats.html.vue"]]),m=JSON.parse('{"path":"/guide/file-formats.html","title":"文件格式","lang":"zh-CN","frontmatter":{"description":"文件格式 本页面旨在规定 DyNode 使用的项目文件的格式，文件后缀为 .dyn。 格式版本描述为 dyn file format v1 。formatVersion 版本号为 1。 关于项目降级 在 v0.2.0 之前的 DyNode 使用的格式版本描述为 dyn file format v0。v1 相对于 v0 版本的项目格式产生了重大变动，因此...","head":[["link",{"rel":"alternate","hreflang":"en-us","href":"https://dyn.iorinn.moe/en/guide/file-formats.html"}],["meta",{"property":"og:url","content":"https://dyn.iorinn.moe/guide/file-formats.html"}],["meta",{"property":"og:site_name","content":"DyNode"}],["meta",{"property":"og:title","content":"文件格式"}],["meta",{"property":"og:description","content":"文件格式 本页面旨在规定 DyNode 使用的项目文件的格式，文件后缀为 .dyn。 格式版本描述为 dyn file format v1 。formatVersion 版本号为 1。 关于项目降级 在 v0.2.0 之前的 DyNode 使用的格式版本描述为 dyn file format v0。v1 相对于 v0 版本的项目格式产生了重大变动，因此..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:locale:alternate","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-08-13T04:11:07.000Z"}],["meta",{"property":"article:modified_time","content":"2025-08-13T04:11:07.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"文件格式\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-08-13T04:11:07.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"约定","slug":"约定","link":"#约定","children":[]},{"level":2,"title":"projectObject","slug":"projectobject","link":"#projectobject","children":[]},{"level":2,"title":"projectMetadataObject","slug":"projectmetadataobject","link":"#projectmetadataobject","children":[]},{"level":2,"title":"chartObject","slug":"chartobject","link":"#chartobject","children":[{"level":3,"title":"chartPathObject","slug":"chartpathobject","link":"#chartpathobject","children":[]},{"level":3,"title":"chartMetadataObject","slug":"chartmetadataobject","link":"#chartmetadataobject","children":[]},{"level":3,"title":"timingPointObject","slug":"timingpointobject","link":"#timingpointobject","children":[]},{"level":3,"title":"noteObject","slug":"noteobject","link":"#noteobject","children":[]}]}],"git":{"createdTime":1663502225000,"updatedTime":1755058267000,"contributors":[{"name":"NordLandeW","username":"NordLandeW","email":"31349569+NagaseIori@users.noreply.github.com","commits":1,"url":"https://github.com/NordLandeW"},{"name":"Rin","username":"Rin","email":"31349569+NagaseIori@users.noreply.github.com","commits":2,"url":"https://github.com/Rin"},{"name":"NagaseIori","username":"NagaseIori","email":"ajcxsu@gmail.com","commits":4,"url":"https://github.com/NagaseIori"}]},"readingTime":{"minutes":4.87,"words":1460},"filePathRelative":"guide/file-formats.md","localizedDate":"2022年9月18日","autoDesc":true}');export{u as comp,m as data};
